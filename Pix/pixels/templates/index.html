<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Differential Privacy</title>
  </head>
  <body>
    <h1>Basic Differential Privacy</h1>
    {% load static %}
    <img id="original" src="{%static '/images/osu.png' %}" style="display: none;">
    <canvas id="canvas" width="300" height="300"></canvas>
    <form>
		<input type="radio" id="original" name="choice" value="original" checked>
  		<label for="original">Original</label>

		<input type="radio" id="coindif" name="choice" value="coindif">
  		<label for="coindif">CoinDif(50%, 50%)</label>

        <input type="radio" id="sample" name="choice" value="sample">
  		<label for="sample">DrawSample</label>
    </form>
    <p id="ExSample"></p>

    <hr>
    <button id="Proportion">Check Proportion</button>
    <p id="ProportionData"></p>

    <br>

    <button id="ProportionTest">Run Proportion Test</button>
    <p id="ProportionTestData"></p>
   
    <br>

    <input type="number" name="SampleSize" id="SampleSize" min="1000" max="10000" value="1000">
    <button id="ProportionSampleTest">Run Sample Proportion Test</button>
    <p id="ProportionSampleTestData"></p>

    <pre>
        <code>
    function randomizedResponse(trueval, alpha, beta){
        if (Math.random() < alpha){
            return trueval;
        } else if (Math.random() < beta){
            return 1;
        } else {
            return 0;
        }
    }
        </code>
        <code>
    // pseudo code for image manipulations
    <b>for</b> each pixel (r,g,b) in ImageData <b>do</b>
        testVal ← -1
        testVal ← randomizedResponse(testVal, alpha, beta) 
        <b>if</b> testVal equals 1 <b>do</b>
            (r,g,b) ← (0,0,0)       // replace with black pixel
        <b>else if</b> testVal equals 0 <b>do</b> 
            (r,g,b) ← (255,255,255) // replace with white pixel
        <b>else</b>
            // -1, keep original black or white pixel
        </code>
    </pre>
    <p>It may take a few seconds:</p>
    <button id="Generate">Generate</button>
    <table id="GenerateTable">
    </table>
    
    {% load static %}
    <script src="{%static '/js/pixel.js' %}"></script>
    <style>
        html {
            background-color: black;
            color: white;
        }
        canvas {
            border: 1px solid #999;
            margin: 10px;
        }
        pre code {
            background-color: rgb(37, 37, 37);
            border: 1px solid #999;
            display: block;
            padding: 10px;
        }
        td{
            padding: 10px;
        }
    </style>
  </body>
</html>